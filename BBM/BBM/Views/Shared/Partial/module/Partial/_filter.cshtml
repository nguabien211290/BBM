<script type="text/html" id="Filter_Search">
    <div class="controls">
        <div class="btn-group">
            <div class="input-icon span12">
                <input type="text" placeholder="Tìm kiếm" data-bind="value: KeywordSearch,valueUpdate: 'afterkeydown', attr:{'class':typeFilter()=='Product_Control'?'span8 m-b-none txtSearchFull':'span12 m-b-none txtSearchFull'}">
                <i class="icon-search nav-search-icon"></i>
                <!--ko if: !isNotFilter() -->
                <a data-toggle="dropdown" class="btn btn-small btn-primary dropdown-toggle">
                    Bộc lọc <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <!--ko if: typeFilter()=='Product_Control' || typeFilter()=='Product' -->
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Nhóm hàng hóa</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listCatalog-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Name, click:function(){$parents[0].PushTagFilter($data,'Catalog')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Nhà phân phối</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listSuppliers-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Name, click:function(){$parents[0].PushTagFilter($data,'Suppliers')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Trạng thái</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listStatus-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Value, click:function(){$parents[0].PushTagFilter($data,'Status')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">VAT</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listStatusVAT-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Value, click:function(){$parents[0].PushTagFilter($data,'VAT')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    @*<li>
                <a href="#" tabindex="-1" data-bind="click : function(){  CommonUtils.showModal('#Order_ChannelFilteModal'+ classNameTab())}">Bán hàng theo</a>
            </li>*@
                    <li>
                        <a href="#" tabindex="-1" data-bind="click : function(){ typeChildFilter('Price');CommonUtils.showModal('#Order_ChannelPriceFilteModal'+ classNameTab())}">Giá Kênh</a>
                    </li>
                    <li>
                        <a href="#" tabindex="-1" data-bind="click : function(){ typeChildFilter('Stock');CommonUtils.showModal('#Order_ChannelPriceFilteModal'+ classNameTab())}">Tồn kho</a>
                    </li>
                    <!-- /ko -->
                    <!--ko if: typeFilter()=='Order_Output'
                            || typeFilter()=='Order_Input'
                            || typeFilter()=='Order_Channel'
                            || typeFilter()=='Order_Suppliers' -->
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Trạng thái</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listStatus-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Value, click:function(){$parents[0].PushTagFilter($data,'Status')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <!--ko if: typeFilter()=='Order_Output'
                                 || typeFilter()=='Order_Input'-->
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Từ Kho</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: LstBranches-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: BranchesName, click:function(){$parents[0].PushTagFilter($data,'Brach_From')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Kho đến</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: LstBranches-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: BranchesName, click:function(){$parents[0].PushTagFilter($data,'Brach_To')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <!-- /ko -->
                    <!-- /ko -->
                    <!--ko if: typeFilter()=='Order_Output'
                                || typeFilter()=='Order_ProductSwitch'
                                || typeFilter()=='Order_Input'
                                || typeFilter()=='Order_Channel'
                                || typeFilter()=='Order_Suppliers' -->
                    <li>
                        <a href="#" tabindex="-1" data-bind="click : function(){  CommonUtils.showModal('#Order_ChannelFilteModal'+ classNameTab())}">Thời gian</a>
                    </li>
                    <!-- /ko -->
                    <!--ko if: typeFilter()=='Order_Channel' -->
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Người bán</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listEmployeeShip-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Name, click:function(){$parents[0].PushTagFilter($data,'EmployeeCreate')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Người giao</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listEmployeeShip-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Name, click:function(){$parents[0].PushTagFilter($data,'EmployeeShip')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <!-- /ko -->
                    <!--ko if:typeFilter()=='Order_Input'
                            || typeFilter()=='Order_Suppliers' -->
                    <li class="dropdown-submenu">
                        <a href="#" tabindex="-1">Nhà phân phối</a>
                        <ul class="dropdown-menu overflow_y">
                            <!--ko foreach: listSuppliers-->
                            <li>
                                <a href="#" tabindex="-1" data-bind="text: $data.Name, click:function(){$parents[0].PushTagFilter($data,'Suppliers')}"></a>
                            </li>
                            <!--/ko-->
                        </ul>
                    </li>
                    <!--/ko-->
                </ul>
                <!--/ko-->
                
            </div>
        </div>
        <!--ko if: Fiterby().length > 0 -->
        <div class="tags border-none span12">
            <!--ko foreach: Fiterby -->
            <!-- ko if: IsDisplay -->
            <!-- ko if: Type !== 'Date' -->
            <span class="tag"><span data-bind="text: $data.FiterDisplay"></span><button type="button" data-bind="click: $parents[0].RemoveTagFilter" class="close">×</button></span>
            <!--/ko-->
            <!-- ko if: Type === 'Date' -->
            <!--ko if: $parents[0].typeFilter()=='Product_Control' || $parents[0].typeFilter()=='Product' -->
            <span class="tag"><span data-bind="text: $data.Name"></span> Từ <span data-bind="dateshort: $data.StartDate"></span> đến <span data-bind="dateshort: $data.EndDate"></span>  <button type="button" data-bind="click: $parents[0].RemoveTagFilter" class="close">×</button></span>
            <!--/ko-->
            <!--ko if: $parents[0].typeFilter()=='Order_Output'
                    || $parents[0].typeFilter()=='Order_Channel'
                    || $parents[0].typeFilter()=='Order_ProductSwitch'
                    || $parents[0].typeFilter()=='Order_Input'
                    || $parents[0].typeFilter()=='Order_Suppliers' -->
            <span class="tag">Từ <span data-bind="dateshort: $data.StartDate"></span> đến <span data-bind="dateshort: $data.EndDate"></span>  <button type="button" data-bind="click: $parents[0].RemoveTagFilter" class="close">×</button></span>
            <!--/ko-->
            <!--/ko-->
            <!--/ko-->
            <!--/ko-->
        </div>
        <!--/ko-->
        <!--ko if: typeFilter()=='Product_Control' -->
        <!--ko if:listData().length >0-->
        <div class="row-fluid">
            <table class="table table-striped table-bordered table-hover dataTable m-t-5">
                <thead>
                    <tr>
                        <th></th>
                        <th data-bind="click: function(){ Sortby('Code'),SortbyDesc(SortbyDesc()?false:true)}">Mã</th>
                        <th data-bind="click: function(){ Sortby('ProductName'),SortbyDesc(SortbyDesc()?false:true)}">Tên</th>
                        <th data-bind="click: function(){ Sortby('Stock_Total'); SortbyDesc(SortbyDesc()?false:true)}">Tồn</th>
                        <th data-bind="click: function(){ Sortby('Stock_Sum'); SortbyDesc(SortbyDesc()?false:true)}">Tồn Chung</th>
                    </tr>
                </thead>
                <tbody>
                    <!--ko foreach: listData() -->
                    <tr>
                        <td>
                            <button class="btn btn-success btn-mini" data-bind="click: $parents[0].AddToList"><i class="icon-plus"></i></button>
                        </td>
                        <td>
                            <span data-bind="text: product().masp"></span>
                            <img data-bind="img:{src: 'https://babymart.vn/Images/hinhdulieu/thumbnail/' +  product().Img()}" style="max-width:40px" />
                        </td>
                        <td>
                            <span data-bind="text: product().tensp"></span>
                        </td>
                        <td>
                            <span data-bind="text:product().Stock_Total"></span>
                        </td>
                        <td>
                            <span data-bind="text:product().Stock_Sum"></span>
                        </td>
                    </tr>
                    <!--/ko-->
                </tbody>
            </table>
            <div class="row-fluid">
                <div class="span8">
                    <div class="dataTables_info" style="font-size:10px">Từ <span data-bind="text: parseInt(CurrentPage()) == 1 ? 1 : ((parseInt(CurrentPage()) * parseInt(ItemPerPage())) -(parseInt(ItemPerPage())-1 ))"></span> đến <span data-bind="text: (parseInt(CurrentPage()) * parseInt(ItemPerPage()))"></span> của <span data-bind="text: Totalitems"></span> sp</div>
                </div>
                <div class="span12">
                    <div class="span4">
                        <select class="span12" data-bind="options: OptionShowItem, optionsText: 'label', optionsValue: 'key',value: ItemPerPage"></select>
                    </div>
                    <div class="span7 dataTables_paginate paging_bootstrap pagination">
                        <ul>
                            <li>
                                <a data-bind="visible: CurrentPage() != 1,click: function(){ ChangePage(1); }"><i class="icon-double-angle-left"></i></a>
                            </li>
                            <li>
                                <a data-bind="visible: CurrentPage() != 1,click: function(){ ChangePage(CurrentPage()-1); }">
                                    <i class="icon-angle-left"></i>
                                </a>
                            </li>
                            <li>
                                <a data-bind="visible: (CurrentPage()-1>0),click: function(){ ChangePage(CurrentPage()-1); }, text: (CurrentPage()-1)"></a>
                            </li>
                            <li class="active">
                                <a data-bind="visible: Totalitems()>0 , text: CurrentPage()">1</a>
                            </li>
                            <li>
                                <a data-bind="visible: (CurrentPage()+1) <= NumberOfPage() ,click: function(){ ChangePage(CurrentPage()+1)}, text: (CurrentPage()+1)"></a>
                            </li>
                            <li class="next">
                                <a data-bind="visible:(CurrentPage()+1) <= NumberOfPage(), click: function(){ ChangePage(CurrentPage()+1)}">
                                    <i class="icon-angle-right"></i>
                                </a>
                            </li>
                            <li>
                                <a data-bind="visible:CurrentPage() < NumberOfPage(), click: function(){ ChangePage(NumberOfPage())}"><i class="icon-double-angle-right"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    </div>
    <div data-bind="attr:{'id':'Order_ChannelFilteModal'+ classNameTab()}" class="modal fade hide">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- dialog body -->
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <!--ko if: typeFilter()=='Product_Control' || typeFilter()=='Product' -->
                    <div class="span12">
                        <span class="span4 text-right">Kho bán: </span>
                        <div class="span8">
                            <select data-bind="options: LstBranches, optionsText: 'BranchesName', value: BranchesSelect"></select>
                        </div>
                    </div>
                    <!--/ko-->
                    <div class="span12">
                        <span class="span4 text-right">Từ: </span>
                        <div class="span8">
                            <input type="text" readonly="readonly" data-bind="datepicker: StartdateFilter" class="input datepicker" data-date-format="dd-mm-yyyy" />

                        </div>
                    </div>
                    <div class="span12">
                        <span class="span4 text-right">Đến: </span>
                        <div class="span8">
                            <input type="text" readonly="readonly" data-bind="datepicker: EndDateFilter" class="input datepicker" data-date-format="dd-mm-yyyy" />

                        </div>
                    </div>
                </div>
                <!-- dialog buttons -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bind="click: function(){  CommonUtils.closeModal('#Order_ChannelFilteModal'+ classNameTab())}">Hủy</button>
                    <!--ko if: typeFilter()=='Product_Control' || typeFilter()=='Product' -->
                    <button type="button" class="btn btn-primary" data-bind="click: function(){ PushTagFilter(null,'Order_Channel')}">OK</button>
                    <!--/ko-->
                    <!--ko if: typeFilter()=='Order_Output'
                        || typeFilter()=='Order_ProductSwitch'
                        || typeFilter()=='Order_Input'
                        || typeFilter()=='Order_Channel'
                        || typeFilter()=='Order_Suppliers'-->
                    <button type="button" class="btn btn-primary" data-bind="click: function(){ PushTagFilter(null,'Time_To_From')}">OK</button>
                    <!--/ko-->

                </div>
            </div>
        </div>
    </div>
    <div data-bind="attr:{'id':'Order_ChannelPriceFilteModal'+ classNameTab()}" class="modal fade hide">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">
                        <!--ko if: typeChildFilter() =='Price'-->
                        Bộ lọc giá
                        <!--/ko-->
                        <!--ko if: typeChildFilter() =='Stock'-->
                        Bộ lọc tồn kho
                        <!--/ko-->
                    </h4>
                </div>
                <div class="modal-body">
                    <!--ko if: typeChildFilter()=='Stock'-->
                    <div class="span12" style="margin-left:12px">
                        <span class="span4 text-right">Kho: </span>
                        <div class="span8">
                            <select data-bind="options: LstBranches, optionsText: 'BranchesName', value: BranchesSelect" style="margin: 0px;margin-bottom: 10px;"></select>
                        </div>
                    </div>
                    <!--/ko-->
                    <div class="span12">
                        <span class="span4 text-right">So sánh: </span>
                        <div class="span8">
                            <select data-bind="options: listCompare, optionsText: 'Name', value: selectCompare" style="margin: 0px;margin-bottom: 10px;width: 100px;"></select>
                        </div>
                    </div>
                    <!--ko if: typeChildFilter()=='Stock'-->
                    <div class="span12">
                        <span class="span4 text-right">Giá trị so sánh: </span>
                        <div class="span8">
                            <input data-bind="value: ValueFilter" style="width: 97px;" />
                        </div>
                    </div>
                    <!--/ko-->
                    <!--ko if: typeChildFilter()=='Price'-->
                    <div class="span12">
                        <span class="span4 text-right">Giá trị so sánh: </span>
                        <div class="span8">
                            <input data-bind="moneyMaskWithSymbol: ValueFilter" style="width: 97px;" />
                        </div>
                    </div>
                    <!--/ko-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bind="click: function(){  CommonUtils.closeModal('#Order_ChannelPriceFilteModal'+ classNameTab())}">Hủy</button>
                    <button type="button" class="btn btn-primary" data-bind="click: function(){ PushTagFilter(null,typeChildFilter())}">OK</button>
                </div>
            </div>
        </div>
    </div>
</script>