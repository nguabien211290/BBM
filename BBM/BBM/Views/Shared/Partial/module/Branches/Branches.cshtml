<script src=@Url.Content("~/Scripts/module/Branches/m.Branches.js")></script>
<script src=@Url.Content("~/Scripts/module/Branches/mv.Branches.js")></script>
<script>
    var branches = new Branches.mvBranches();
    $(document).ready(function () {
        branches.Start();
    });
</script>
<div id="BranchesViewId" class="row-fluid">
    <div class="span12">

        <div class="text-right padding5px">
            <button class="btn btn-success" data-bind="click: OpentModalAddBranches">Thêm KHO</button>
            <button class="btn btn-primary" data-bind="click: function() {  branches.Start() }"><i class="icon-refresh"></i></button>
        </div>
        <div class="row-fluid">
            <div class="table-header">
                KHO
            </div>
            <table class="table table-striped table-bordered table-hover dataTable">
                <thead>
                    <tr>
                        <th>Mã KHO</th>
                        <th>Tên KHO</th>
                        <th>Điện thoại</th>
                        <th>Địa chỉ</th>
                    </tr>
                </thead>
                <tbody>
                    <!--ko foreach: listData() -->
                    <tr data-bind="click: $parents[0].GetDetail, attr:{class: IsViewDetail()?'headDetail cursor-pointer':'cursor-pointer'}">
                        <td>
                            <span data-bind="text: Code"></span>
                        </td>
                        <td>
                            <span data-bind="text: BranchesName"></span>
                        </td>
                        <td>
                            <span data-bind="text: Phone"></span>
                        </td>
                        <td>
                            <span data-bind="text: Address"></span>
                        </td>
                    </tr>
                    <!--ko if: IsViewDetail-->
                    <tr class="footerDetail">
                        <td colspan="7">
                            <div class="tabbable">
                                <ul class="nav nav-tabs" id="myTab">
                                    <li class="active">
                                        <a data-toggle="tab" href="#info">
                                            Thông tin
                                        </a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane in active">
                                        <div class="span6 border-right m-b-30">
                                            <div>
                                                <span class="span4 text-left">Thông tin kho: </span>
                                                <span class="span8 text-left"></span>
                                            </div>
                                            <div>
                                                <div class="span4 text-right">Mã Kho: </div>
                                                <div class="span8 text-left"> <input type="text" data-bind="value: Code" class="form-control" /></div>
                                            </div>
                                            <div>
                                                <div class="span4 text-right"></div>
                                                <div class="span8 text-left">
                                                    <label>
                                                        <input type="checkbox" data-bind="checked: IsPrimary">
                                                        <span class="lbl">Đặt làm Kho chính</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="span4 text-right">Tên Kho: </div>
                                                <div class="span8 text-left"> <input type="text" data-bind="value: BranchesName" class="form-control" /></div>
                                            </div>
                                            <div>
                                                <div class="span4 text-right">Điên thoại: </div>
                                                <div class="span8 text-left"> <input type="text" data-bind="value: Phone" /></div>
                                            </div>
                                            <div>
                                                <div class="span4 text-right">Địa chỉ: </div>
                                                <div class="span8 text-left"> <input type="text" data-bind="value: Address" /></div>
                                            </div>
                                            <div>
                                                <div class="span4 text-right"></div>
                                                <div class="span8 text-left">
                                                    <button class="btn btn-success btn-small" data-bind="click:  $parents[0].SaveUpdateBranchs"><i class="icon-save"></i>Cập nhật</button>
                                                    <button class="btn btn-danger btn-small" data-bind="click:  $parents[0].RemoveBranchs"><i class="icon-remove"></i>Xóa</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div style="margin-bottom:60px;">
                                                <div class="span4 text-left">Kênh  bán hàng: </div>
                                                <div class="span8 text-right">
                                                    <button class="btn btn-primary btn-small" data-bind="click: $parents[0].addBrandes"><i class="icon-plus"></i></button>
                                                </div>
                                            </div>

                                            <div class="row-fluid">
                                                <!--ko foreach: soft_Channel-->
                                                <div class="span5">
                                                    <h3 class="header smaller" data-bind="text: Channel"></h3>
                                                    <div class="m-t-5">
                                                        <div class="span4 text-right">Loại</div>
                                                        <div class="span8 text-left">
                                                            <select class="span12" data-bind="options:typeChannel,  optionsText: 'Value', optionsValue: 'Key', value: Type"></select>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="span4 text-right">Code: </div>
                                                        <div class="span8 text-left"> <input type="text" data-bind="value: Code" class="form-control span12" /></div>
                                                    </div>
                                                    <div>
                                                        <div class="span4 text-right">Tên kênh: </div>
                                                        <div class="span8 text-left"> <input type="text" data-bind="value: Channel" class="form-control span12" /></div>
                                                    </div>
                                                    <div>
                                                        <div class="span4 text-right">Ghi chú: </div>
                                                        <div class="span8 text-left"> <textarea data-bind="value: Note" class="form-control span12" /></div>
                                                    </div>
                                                    <div>
                                                        <div class="span4 text-right"></div>
                                                        <div class="span8 text-left">
                                                            <button class="btn btn-success btn-small" data-bind="click:  $parents[1].SaveUpdateChannel">
                                                                <!--ko if: Id-->
                                                                <i class="icon-save"></i>
                                                                <!--/ko-->
                                                                <!--ko if: !Id()-->
                                                                <i class="icon-plus"></i>
                                                                <!--/ko-->
                                                            </button>
                                                            <!--ko if: Id-->
                                                            <button class="btn btn-danger btn-small" data-bind="click:  $parents[1].RemoveChannel"><i class="icon-remove"></i></button>
                                                            <!--/ko-->
                                                        </div>
                                                    </div>

                                                </div>
                                                <!--/ko-->
                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </td>
                    </tr>
                    <!--/ko-->
                    <!--/ko-->
                </tbody>
            </table>
        </div>
    </div>

    <div id="updateBranchesModal" class="modal fade hide">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- dialog body -->
                <div class="modal-body" data-bind="with: mBrachesNew">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <div class="span12">
                        <span class="span4 text-right">Tên Kho: </span>
                        <div class="span8"> <input type="text" data-bind="value: BranchesName" /></div>
                    </div>
                </div>
                <!-- dialog buttons -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger btnCancel">Hủy</button>
                    <button type="button" class="btn btn-primary btnOk">OK</button>
                </div>
            </div>
        </div>
    </div>
</div>
